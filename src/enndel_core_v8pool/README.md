# V8 Pool - SSR —Å Rust + Deno V8

> –í—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π –ø—É–ª V8 –∏–∑–æ–ª—è—Ç–æ–≤ –¥–ª—è Server-Side Rendering –Ω–∞ Rust

## üöÄ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **–ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å**: –ü—É–ª V8 –∏–∑–æ–ª—è—Ç–æ–≤ (–ø–æ –æ–¥–Ω–æ–º—É –Ω–∞ CPU –ø–æ—Ç–æ–∫)
- **–ü–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –†–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É `Send + Sync` —á–µ—Ä–µ–∑ –∫–∞–Ω–∞–ª—ã
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ `tokio`
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Axum**: –õ–µ–≥–∫–æ –≤—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ Axum handlers

## üì¶ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
HTTP –∑–∞–ø—Ä–æ—Å ‚Üí Axum handler ‚Üí V8Pool.render()
  ‚Üì
mpsc unbounded channel
  ‚Üì
Worker thread 1, 2, 3...N (–∫–∞–∂–¥—ã–π —Å JsRuntime)
  ‚Üì
JS —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –≤ V8 isolate
  ‚Üì
oneshot channel ‚Üí Response
```

## üîß –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```rust
use v8_pool::V8Pool;

#[tokio::main]
async fn main() {
    // –°–æ–∑–¥–∞—ë–º –ø—É–ª (–ø–æ —á–∏—Å–ª—É CPU –ø–æ—Ç–æ–∫–æ–≤)
    let pool = V8Pool::new(num_cpus::get());

    // –†–µ–Ω–¥–µ—Ä–∏–º HTML
    let html = pool.render("/shop".to_string()).await.unwrap();
}
```

## üéØ –†–µ—à–∞–µ–º—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ü—Ä–æ–±–ª–µ–º–∞: V8 –Ω–µ Send + Sync

V8 `JsRuntime` —Å–æ–¥–µ—Ä–∂–∏—Ç `RefCell<dyn Any>` - –Ω–µ –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–π —Ç–∏–ø.
Axum —Ç—Ä–µ–±—É–µ—Ç `Send + Sync` –¥–ª—è –≤—Å–µ—Ö state.

### –†–µ—à–µ–Ω–∏–µ: –ü—É–ª –∏–∑–æ–ª—è—Ç–æ–≤

1. –ö–∞–∂–¥—ã–π `JsRuntime` –∂–∏–≤—ë—Ç –≤ —Å–≤–æ—ë–º –ø–æ—Ç–æ–∫–µ
2. –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ `mpsc` –∫–∞–Ω–∞–ª—ã (Send + Sync ‚úì)
3. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —á–µ—Ä–µ–∑ `oneshot` –∫–∞–Ω–∞–ª—ã
4. –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —á–µ—Ä–µ–∑ `tokio`

## üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **–ü–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º**: N –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä–µ–Ω–¥–µ—Ä–æ–≤ (N = CPU threads)
- **–ò–∑–æ–ª—è—Ü–∏—è**: –ö–∞–∂–¥—ã–π worker –Ω–µ–∑–∞–≤–∏—Å–∏–º
- **–ë–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫**: Lock-free –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- **Memory efficient**: V8 isolates –ª–µ–≥–∫–æ–≤–µ—Å–Ω–µ–µ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

## üõ£Ô∏è Roadmap –¥–ª—è –æ–ø–µ–Ω—Å–æ—Ä—Å

- [ ] Builder pattern –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- [ ] –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã—Ö JS –±–∞–Ω–¥–ª–æ–≤
- [ ] –ú–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- [ ] Graceful shutdown
- [ ] Hot reload JS –∫–æ–¥–∞
- [ ] Timeout –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
- [ ] Error handling –∏ retry
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ React/Vue/Svelte
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –ø—Ä–∏–º–µ—Ä—ã
- [ ] –ë–µ–Ω—á–º–∞—Ä–∫–∏ vs Node.js SSR

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)

## üë• –ê–≤—Ç–æ—Ä—ã

- –°–æ–∑–¥–∞–Ω–æ –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ Enddel
- –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –≤—ã–¥–µ–ª–µ–Ω–∏–µ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π crate

---

**Status**: üöß –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ (proof of concept —Ä–∞–±–æ—Ç–∞–µ—Ç!)
